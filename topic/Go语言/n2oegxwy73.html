<!doctype html>
<html>
    <head>
        <!-- META Tags -->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Go 语言结构体介绍 | 风中的木偶</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- SEO -->
        <meta name="author" content="风中的木偶">
        <meta name="description" content="">
        <meta name="keywords" content="木偶笔记,个人技术博客,IT技术笔记,博客,个人网站,风中的木偶,木偶">
        <meta name="twitter:card" value="summary">
                                                                <meta property="og:title" content="风中的木偶个人博客" />
                                                                <meta property="og:type" content="article" />
                                                                <meta property="og:url" content="https://wangmaolin.net" />
                                                                                            
        <!-- CSS -->
        <link rel="stylesheet" href="../../vendor/binarytorch/larecipe/assets/css/app.css">

        
        <!-- FontAwesome -->
        <link rel="stylesheet" href="../../vendor/binarytorch/larecipe/assets/css/font-awesome.css">
                    <link rel="stylesheet" href="../../vendor/binarytorch/larecipe/assets/css/font-awesome-v4-shims.css">
        
        <!-- Dynamic Colors -->
        <style>
    :root {
        --primary: #787AF6;
        --secondary: #2b9cf2;
    }

    :not(pre)>code[class*=language-], pre[class*=language-] {
        border-top: 3px solid #787AF6;
    }
    
    .bg-gradient-primary {
        background: linear-gradient(87deg, #787AF6 0, #2b9cf2 100%) !important;
    }

    [v-cloak] > * { 
        display: none; 
    }
    
    [v-cloak]::before { 
        content: " ";
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #F2F6FA;
    }
</style>
        <!-- CSRF Token -->
        <meta name="csrf-token" content="frrBW4DvuFNY0e6AyDqU3Itj2DLGTTxPOBGKuWip">

        
    </head>
    <body>
        <div id="app" v-cloak>
            <div class="fixed pin-t pin-x z-40">
    <div class="bg-gradient-primary text-white h-1"></div>

    <nav class="flex items-center justify-between text-black bg-navbar shadow-xs h-16">
        <div class="flex items-center flex-no-shrink">
            <a href="../../index.html" class="flex items-center flex-no-shrink text-black mx-4">
                
                <p class="inline-block font-semibold mx-1 text-grey-dark">
                    风中的木偶
                </p>
            </a>

            <div class="switch">
                <input type="checkbox" name="1" id="1" v-model="sidebar" class="switch-checkbox"/>
                <label class="switch-label" for="1"></label>
            </div>
        </div>

        <div class="hidden lg:flex items-center justify-end pr-4">
            <div class="relative">
                <form action="https://wangmaolin.net/search" onsubmit="return validateForm()" class="form-search">
                    <input id="search-input" name="q" type="text" placeholder="Search" class="bg-gray-100 appearance-none border-2 border-gray-200 rounded py-2 px-4
         text-gray-800 leading-tight focus:outline-none focus:bg-white focus:border-gray-500">
                </form>
            </div>
        </div>

        <div class="block mx-4 flex items-center">
                        
            
            
            
            

            
            <larecipe-dropdown>
                <larecipe-button type="primary" class="flex">
                    Go语言 <i class="mx-1 fa fa-angle-down"></i>
                </larecipe-button>

                <template slot="list">
                    <ul class="list-reset" style="height: 800px;width: 200px">
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../AI/overview.html">AI</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../APP/overview.html">APP</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../CSS/overview.html">CSS</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Docker/overview.html">Docker</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../ELK/overview.html">ELK</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Git/overview.html">Git</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="overview.html">Go语言</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Laravel/overview.html">Laravel</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Linux/overview.html">Linux</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Linux&#32;服务器配置/overview.html">Linux 服务器配置</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Mac/overview.html">Mac</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../MongoDB/overview.html">MongoDB</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Mqtt/overview.html">Mqtt</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../MySQL/overview.html">MySQL</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Nginx/overview.html">Nginx</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../PHP/overview.html">PHP</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Protobuf/overview.html">Protobuf</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Python/overview.html">Python</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../SEO/overview.html">SEO</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Vue&#32;教程/overview.html">Vue 教程</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Windows/overview.html">Windows</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../一无所有到财富自由/overview.html">一无所有到财富自由</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../云服务/overview.html">云服务</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../产品/overview.html">产品</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../元宇宙/overview.html">元宇宙</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../前端/overview.html">前端</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../合伙的本质/overview.html">合伙的本质</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../商业/overview.html">商业</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../大数据/overview.html">大数据</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../天机38局/overview.html">天机38局</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../开源项目/overview.html">开源项目</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../微信/overview.html">微信</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../控糖革命/overview.html">控糖革命</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../搜索/overview.html">搜索</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../支付/overview.html">支付</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../智慧人生/overview.html">智慧人生</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../架构/overview.html">架构</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../算法/overview.html">算法</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../缓存/overview.html">缓存</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../网络/overview.html">网络</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../自媒体/overview.html">自媒体</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../菜谱/overview.html">菜谱</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../设计模式/overview.html">设计模式</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../资源/overview.html">资源</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../软件工具/overview.html">软件工具</a>
                            </li>
                                            </ul>
                </template>
            </larecipe-dropdown>
            

                    </div>
    </nav>
</div>

            
            <div>
	<div class="sidebar" :class="[{'is-hidden': ! sidebar}]">
    <ul>
<li>
<h2>Go教程</h2>
<ul>
<li id="blog274"><a href="z64y9kdv5l.html#blog274">Go 语言环境安装</a>
<li id="blog275"><a href="mx5e633e0r.html#blog275">Go 国内加速镜像 &amp; go get 命令国内加速</a>
<li id="blog276"><a href="rpnv3zmewm.html#blog276">Go Modules 详解</a>
<li id="blog277"><a href="n2oeg18e73.html#blog277">Go Module 之 go.mod 文件解析</a>
<li id="blog377"><a href="n2oegxwy73.html#blog377">Go 语言结构体介绍</a>
</ul>
</li>
<li>
<h2>Go语言</h2>
<ul>
<li id="blog319"><a href="2dne2p2y5q.html#blog319">GoLand 导入包时标红解决方法</a>
<li id="blog365"><a href="1j6y09zy2k.html#blog365">为什么 Go 语言是后端开发的未来</a>
<li id="blog374"><a href="z64y942e5l.html#blog374">Go 语言基础</a>
</ul>
</li>
</ul>
</div>

<style>
    #cnzz_stat_icon_1280630928
    {
        display: none;
    }
</style>

<script src="../../vendor/binarytorch/larecipe/assets/js/jquery.min.js"></script>
<script src="../../modules/blog/js/detail.js"></script>

<script type="text/javascript">
    $(function () {
        var cid = 'n2oegxwy73.html';
        if (!checkView(cid)) {
            $.get('https://wangmaolin.net/api/blog/addView/article/n2oegxwy73.html', function (data, status) {
                addView('n2oegxwy73.html')
            });
        }
    });
</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7c12b9716af39eb368cff4a19aa89393";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7125202304422722"
     crossorigin="anonymous"></script>
	
	<div class="documentation is-dark" :class="{'expanded': ! sidebar}">
		<h1>Go 语言结构体介绍</h1><ul>
<li><a href="n2oegxwy73.html#f776ff462749ea00d8b23f707c73de79">1、声明和初始化</a></li>
<li><a href="n2oegxwy73.html#6ffa390b74ec33ea0a8ee85e954d8278">2、结构体上的函数</a></li>
<li><a href="n2oegxwy73.html#03b2817fce7c6012afdf7365a3f75f4e">3、构造器</a></li>
<li><a href="n2oegxwy73.html#272a286f7d4382ad8e621c0b6ffb0e81">4、结构体的字段</a></li>
<li><a href="n2oegxwy73.html#cc0a30a9c4c38dc295a5fb0d62350616">5、New</a></li>
<li><a href="n2oegxwy73.html#ea3997582dd788c2a1b1750f2970b713">6、组合</a></li>
<li><a href="n2oegxwy73.html#bd4792864ba030f75ed9d612d1aa65f9">7、指针 VS 值</a></li>
</ul><h2 id="f776ff462749ea00d8b23f707c73de79">1、声明和初始化</h2>
<p>Go 不是像 C ++，Java，Ruby和C＃一样的面向对象的（OO）语言。它没有对象和继承的概念，也没有很多与面向对象相关的概念，例如多态和重载。</p>
<p>Go所具有的是结构体的概念，可以将一些方法和结构体关联。Go 还支持一种简单但有效的组合形式。  总的来说，它会使代码变的更简单，但在某一些场合，你会错过面向对象提供的一些特性。（值得指出的是，通过组合实现继承是一场古老的战斗呐喊，Go 是我用过的第一种坚定立场的语言，在这个问题上。）</p>
<p>虽然 Go 不会像你以前使用的面向对象语言一样，但是你会注意到结构的定义和类的定义之间有很多相似之处。下面的代码定义了一个简单的 <code>Saiyan</code> 结构体：</p>
<pre><code class="language-go">type Saiyan struct {
  Name string
  Power int
}</code></pre>
<p>我们将看明白怎么往这个结构体添加一个方法，就像面向对象类，会有方法作为 它的一部分。在这之前，我们先要知道如何声明结构体。</p>
<p><strong>声明和初始化：</strong></p>
<p>当我们第一次看到变量和声明时，我们只看了内置类型，比如整数和字符串。既然现在我们要讨论结构，那么我们需要把讨论范围扩展到指针。</p>
<p>创建结构的值的最简单的方式是：</p>
<pre><code class="language-go">goku := Saiyan{
  Name: "Goku",
  Power: 9000,
}</code></pre>
<p><em>注意：</em> 上述结构末尾的逗号 <code>,</code> 是必需的。没有它的话，编译器就会报错。你将会喜欢上这种必需的一致性，尤其当你使用一个与这种风格相反的语言或格式的时候。 </p>
<p>我们不必设置所有或哪怕一个字段。下面这些都是有效的：</p>
<pre><code class="language-go">goku := Saiyan{}

// or

goku := Saiyan{Name: "Goku"}
goku.Power = 9000</code></pre>
<p>就像未赋值的变量其值默认为 0 一样，字段也是如此。</p>
<p>此外，你可以不写字段名，依赖字段顺序去初始化结构体 （但是为了可读性，你应该把字段名写清楚）：</p>
<pre><code class="language-go">goku := Saiyan{"Goku", 9000}</code></pre>
<p>以上所有的示例都是声明变量 <code>goku</code> 并赋值。</p>
<p>许多时候，我们并不想让一个变量直接关联到值，而是让它的值为一个指针，通过指针关联到值。一个指针就是内存中的一个地址；指针的值就是实际值的地址。这是间接地获取值的方式。形象地来说，指针和实际值的关系就相当于房子和指向该房子的方向之间的关系。</p>
<p>为什么我们想要一个指针指向值而不是直接包含该值呢？这归结为 Go 中传递参数到函数的方式：镜像复制。知道了这个，尝试理解一下下面的代码呢？</p>
<pre><code class="language-go">func main() {
  goku := Saiyan{"Power", 9000}
  Super(goku)
  fmt.Println(goku.Power)
}

func Super(s Saiyan) {
  s.Power += 10000
}</code></pre>
<p>上面程序运行的结果是 9000，而不是 19000,。为什么？因为 <code>Super</code> 修改了原始值 <code>goku</code> 的复制版本，而不是它本身，所以，<code>Super</code> 中的修改并不影响上层调用者。现在为了达到你的期望，我们可以传递一个指针到函数中： </p>
<pre><code class="language-go">func main() {
  goku := &amp;Saiyan{"Power", 9000}
  Super(goku)
  fmt.Println(goku.Power)
}

func Super(s *Saiyan) {
  s.Power += 10000
}</code></pre>
<p>这一次，我们修改了两处代码。第一个是使用了 <code>&amp;</code> 操作符以获取值的地址（它就是 <em>取地址</em> 操作符）。然后，我们修改了 <code>Super</code> 参数期望的类型。它之前期望一个 <code>Saiyan</code> 类型，但是现在期望一个地址类型 <code>*Saiyan</code>，这里 <code>*X</code> 意思是 <em>指向类型 X 值的指针</em> 。很显然类型 <code>Saiyan</code> 和 <code>*Saiyan</code> 是有关系的，但是他们是不同的类型。</p>
<p>这里注意到我们仍然传递了一个 <code>goku</code> 的值的副本给 <code>Super</code>，但这时 <code>goku</code> 的值其实是一个地址。所以这个副本值也是一个与原值相等的地址，这就是我们间接传值的方式。想象一下，就像复制一个指向饭店的方向牌。你所拥有的是一个方向牌的副本，但是它仍然指向原来的饭店。</p>
<p>我们可以证实一下这是一个地址的副本，通过修改其指向的值（尽管这可能不是你真正想做的事情）：</p>
<pre><code class="language-go">func main() {
  goku := &amp;Saiyan{"Power", 9000}
  Super(goku)
  fmt.Println(goku.Power)
}

func Super(s *Saiyan) {
  s = &amp;Saiyan{"Gohan", 1000}
}</code></pre>
<p>上面的代码，又一次地输出 9000。就像许多语言表现的那样，包括  Ruby，Python， Java 和 C#，Go 以及部分的 C#，只是让这个事实变得更明显一些。</p>
<p>同样很明显的是，复制一个指针比复制一个复杂的结构的消耗小多了。在 64 位的机器上面，一个指针占据 64 bit 的空间。如果我们有一个包含很多字段的结构，创建它的副本将会是一个很昂贵的操作。指针的真正价值在于能够分享它所指向的值。我们是想让 <code>Super</code> 修改 <code>goku</code> 的副本还是修改共享的 <code>goku</code> 值本身呢？</p>
<p>所有这些并不是说你总应该使用指针。这章末尾，在我们见识了结构的更多功能以后，我们将重新检视 指针与值这个问题。</p>
<h2 id="6ffa390b74ec33ea0a8ee85e954d8278">2、结构体上的函数</h2>
<p>我们可以把一个方法关联在一个结构体上：</p>
<pre><code class="language-go">type Saiyan struct {
  Name string
  Power int
}

func (s *Saiyan) Super() {
  s.Power += 10000
}</code></pre>
<p>在上面的代码中，我们可以这么理解，<code>*Saiyan</code> 类型是 <code>Super</code> 方法的<em>接受者</em>。然后我们可以通过下面的代码去调用 <code>Super</code> 方法：</p>
<pre><code class="language-go">goku := &amp;Saiyan{"Goku", 9001}
goku.Super()
fmt.Println(goku.Power) // 将会打印出 19001</code></pre>
<h2 id="03b2817fce7c6012afdf7365a3f75f4e">3、构造器</h2>
<p>结构体没有构造器。但是，你可以创建一个返回所期望类型的实例的函数（类似于工厂）：</p>
<pre><code class="language-go">func NewSaiyan(name string, power int) *Saiyan {
  return &amp;Saiyan{
    Name: name,
    Power: power,
  }
}</code></pre>
<p>这种模式以错误的方式惹恼了很多开发人员。一方面，这里有一点轻微的语法变化；另一方面，它确实感觉有点不那么明显。</p>
<p>我们的工厂不必返回一个指针；下面的形式是完全有效的：</p>
<pre><code class="language-go">func NewSaiyan(name string, power int) Saiyan {
  return Saiyan{
    Name: name,
    Power: power,
  }
}</code></pre>
<h2 id="272a286f7d4382ad8e621c0b6ffb0e81">4、结构体的字段</h2>
<p>到目前为止的例子中，<code>Saiyan</code> 有两个字段 <code>Name</code> 和 <code>Power</code>，其类型分别为 <code>string</code> 和 <code>int</code>。字段可以是任何类型 -- 包括其他结构体类型以及目前我们还没有提及的 array，maps，interfaces 和 functions 等类型。</p>
<p>例如，我们可以扩展 <code>Saiyan</code> 的定义：</p>
<pre><code class="language-go">type Saiyan struct {
  Name string
  Power int
  Father *Saiyan
}</code></pre>
<p>然后我们通过下面的方式初始化：</p>
<pre><code class="language-go">gohan := &amp;Saiyan{
  Name: "Gohan",
  Power: 1000,
  Father: &amp;Saiyan {
    Name: "Goku",
    Power: 9001,
    Father: nil,
  },
}</code></pre>
<h2 id="cc0a30a9c4c38dc295a5fb0d62350616">5、New</h2>
<p>尽管缺少构造器，Go 语言却有一个内置的 <code>new</code> 函数，使用它来分配类型所需要的内存。 <code>new(X)</code> 的结果与 <code>&amp;X{}</code> 相同。</p>
<pre><code class="language-go">goku := new(Saiyan)
// same as
goku := &amp;Saiyan{}</code></pre>
<p>如何使用取决于你，但是你会发现大多数人更偏爱后一种写法无论是否有字段需要初始化，因为这看起来更具可读性：</p>
<pre><code class="language-go">goku := new(Saiyan)
goku.name = "goku"
goku.power = 9001

//vs

goku := &amp;Saiyan {
  Name: "goku",
  Power: 9000,
}</code></pre>
<p>无论你选择哪一种，如果你遵循上述的工厂模式，就可以保护剩余的代码而不必知道或担心内存分配细节</p>
<h2 id="ea3997582dd788c2a1b1750f2970b713">6、组合</h2>
<p>Go 支持组合， 这是将一个结构包含进另一个结构的行为。在某些语言中，这种行为叫做 特质 或者 混合。 没有明确的组合机制的语言总是可以做到这一点。在 Java 中， 可以使用 <em>继承</em> 来扩展结构。但是在脚本中并没有这种选项， 混合将会被写成如下形式：</p>
<pre><code class="language-java">public class Person {
  private String name;

  public String getName() {
    return this.name;
  }
}

public class Saiyan {
  // Saiyan 中包含着 person 对象
  private Person person;

  // 将请求转发到 person 中
  public String getName() {
    return this.person.getName();
  }
  ...
}</code></pre>
<p>这可能会非常繁琐。<code>Person</code> 的每个方法都需要在 <code>Saiyan</code> 中重复。Go 避免了这种复杂性：</p>
<pre><code class="language-go">type Person struct {
  Name string
}

func (p *Person) Introduce() {
  fmt.Printf("Hi, I'm %s\n", p.Name)
}

type Saiyan struct {
  *Person
  Power int
}

// 使用它
goku := &amp;Saiyan{
  Person: &amp;Person{"Goku"},
  Power: 9001,
}
goku.Introduce()</code></pre>
<p><code>Saiyan</code>  结构体有一个 <code>Person</code> 类型的字段。由于我们没有显式地给它一个字段名，所以我们可以隐式地访问组合类型的字段和函数。然而，Go 编译器确实给了它一个字段，下面这样完全有效：</p>
<pre><code class="language-go">goku := &amp;Saiyan{
  Person: &amp;Person{"Goku"},
}
fmt.Println(goku.Name)
fmt.Println(goku.Person.Name)</code></pre>
<p>上面两个都打印 「Goku」。</p>
<p>组合比继承更好吗？许多人认为它是一种更好的组织代码的方式。当使用继承的时候，你的类和超类紧密耦合在一起，你最终专注于结构而不是行为。</p>
<h2 id="bd4792864ba030f75ed9d612d1aa65f9">7、指针 VS 值</h2>
<p>当你写 Go 代码的时候，很自然就会去问自己 <em>应该是值还是指向值的指针呢？</em> 这儿有两个好消息，首先，无论我们讨论下面哪一项，答案都是一样的：</p>
<ul>
<li>局部变量赋值</li>
<li>结构体指针</li>
<li>函数返回值</li>
<li>函数参数</li>
<li>方法接收器</li>
</ul>
<p>第二，如果你不确定，那就用指针咯。</p>
<p>正如我们已经看到的，传值是一个使数据不可变的好方法（函数中改变它不会反映到调用代码中）。有时，这是你想要的行为，但是通常情况下，不是这样的。</p>
<p>即使你不打算改变数据，也要考虑创建大型结构体副本的成本。相反，你可能有一些小的结构：</p>
<pre><code class="language-go">type Point struct {
  X int
  Y int
}</code></pre>
<p>这种情况下，复制结构的成本能够通过直接访问 <code>X</code> 和 <code>Y</code> 来抵消，而没有其它任何间接操作。</p>
<p>还有，这些案例都是很微妙的，除非你迭代成千上万个这样的指针，否则你不会注意到差异。</p>
			</div>
</div>

            <larecipe-back-to-top></larecipe-back-to-top>
        </div>


        <script>
            window.config = [];
        </script>

        <script type="text/javascript">
            if(localStorage.getItem('larecipeSidebar') == null) {
                localStorage.setItem('larecipeSidebar', !! 1);
            }
        </script>

        <script src="../../vendor/binarytorch/larecipe/assets/js/app.js"></script>

        <script>
            window.LaRecipe = new CreateLarecipe(config)
        </script>

        <!-- Google Analytics -->
                <!-- /Google Analytics -->

        
        <script>
            LaRecipe.run()
        </script>
    </body>
</html>
