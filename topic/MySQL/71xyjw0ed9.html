<!doctype html>
<html>
    <head>
        <!-- META Tags -->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>理解 MySQL 字符集 | 风中的木偶</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- SEO -->
        <meta name="author" content="风中的木偶">
        <meta name="description" content="">
        <meta name="keywords" content="木偶笔记,个人技术博客,IT技术笔记,博客,个人网站,风中的木偶,木偶">
        <meta name="twitter:card" value="summary">
                                                                <meta property="og:title" content="风中的木偶个人博客" />
                                                                <meta property="og:type" content="article" />
                                                                <meta property="og:url" content="https://wangmaolin.net" />
                                                                                            
        <!-- CSS -->
        <link rel="stylesheet" href="../../vendor/binarytorch/larecipe/assets/css/app.css">

        
        <!-- FontAwesome -->
        <link rel="stylesheet" href="../../vendor/binarytorch/larecipe/assets/css/font-awesome.css">
                    <link rel="stylesheet" href="../../vendor/binarytorch/larecipe/assets/css/font-awesome-v4-shims.css">
        
        <!-- Dynamic Colors -->
        <style>
    :root {
        --primary: #787AF6;
        --secondary: #2b9cf2;
    }

    :not(pre)>code[class*=language-], pre[class*=language-] {
        border-top: 3px solid #787AF6;
    }
    
    .bg-gradient-primary {
        background: linear-gradient(87deg, #787AF6 0, #2b9cf2 100%) !important;
    }

    [v-cloak] > * { 
        display: none; 
    }
    
    [v-cloak]::before { 
        content: " ";
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #F2F6FA;
    }
</style>
        
    </head>
    <body>
        <div id="app" v-cloak>
            <div class="fixed pin-t pin-x z-40">
    <div class="bg-gradient-primary text-white h-1"></div>

    <nav class="flex items-center justify-between text-black bg-navbar shadow-xs h-16">
        <div class="flex items-center flex-no-shrink">
            <a href="../../index.html" class="flex items-center flex-no-shrink text-black mx-4">
                
                <p class="inline-block font-semibold mx-1 text-grey-dark">
                    风中的木偶
                </p>
            </a>

            <div class="switch">
                <input type="checkbox" name="1" id="1" v-model="sidebar" class="switch-checkbox"/>
                <label class="switch-label" for="1"></label>
            </div>
        </div>

        <div class="hidden lg:flex items-center justify-end pr-4">
            <div class="relative">
                <form action="https://wangmaolin.net/search" onsubmit="return validateForm()" class="form-search">
                    <input id="search-input" name="q" type="text" placeholder="Search" class="bg-gray-100 appearance-none border-2 border-gray-200 rounded py-2 px-4
         text-gray-800 leading-tight focus:outline-none focus:bg-white focus:border-gray-500">
                </form>
            </div>
        </div>

        <div class="block mx-4 flex items-center">
                        
            
            
            
            

            
            <larecipe-dropdown>
                <larecipe-button type="primary" class="flex">
                    MySQL <i class="mx-1 fa fa-angle-down"></i>
                </larecipe-button>

                <template slot="list">
                    <ul class="list-reset" style="height: 800px;width: 200px">
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../AI/overview.html">AI</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../APP/overview.html">APP</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../CSS/overview.html">CSS</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Docker/overview.html">Docker</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../ELK/overview.html">ELK</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Git/overview.html">Git</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Go语言/overview.html">Go语言</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Laravel/overview.html">Laravel</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Linux/overview.html">Linux</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Linux&#32;服务器配置/overview.html">Linux 服务器配置</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Mac/overview.html">Mac</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../MongoDB/overview.html">MongoDB</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Mqtt/overview.html">Mqtt</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="overview.html">MySQL</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Nginx/overview.html">Nginx</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../PHP/overview.html">PHP</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Protobuf/overview.html">Protobuf</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Python/overview.html">Python</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../SEO/overview.html">SEO</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Vue&#32;教程/overview.html">Vue 教程</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../Windows/overview.html">Windows</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../一无所有到财富自由/overview.html">一无所有到财富自由</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../云服务/overview.html">云服务</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../产品/overview.html">产品</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../元宇宙/overview.html">元宇宙</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../前端/overview.html">前端</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../合伙的本质/overview.html">合伙的本质</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../商业/overview.html">商业</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../大数据/overview.html">大数据</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../天机38局/overview.html">天机38局</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../开源项目/overview.html">开源项目</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../微信/overview.html">微信</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../控糖革命/overview.html">控糖革命</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../搜索/overview.html">搜索</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../支付/overview.html">支付</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../智慧人生/overview.html">智慧人生</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../架构/overview.html">架构</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../算法/overview.html">算法</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../缓存/overview.html">缓存</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../网络/overview.html">网络</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../自媒体/overview.html">自媒体</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../菜谱/overview.html">菜谱</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../设计模式/overview.html">设计模式</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../资源/overview.html">资源</a>
                            </li>
                                                    <li class="py-2 hover:bg-grey-lightest">
                                <a class="px-6 text-grey-darkest"
                                   href="../软件工具/overview.html">软件工具</a>
                            </li>
                                            </ul>
                </template>
            </larecipe-dropdown>
            

                    </div>
    </nav>
</div>

            
            <div>
	<div class="sidebar" :class="[{'is-hidden': ! sidebar}]">
    <ul>
<li>
<h2>字段</h2>
<ul>
<li id="blog71"><a href="x2ev8zwvor.html#blog71">MySQL 批量替换字段中的域名</a>
<li id="blog112"><a href="jwnex74vxd.html#blog112">Mysql 的日期时间类型说明</a>
<li id="blog337"><a href="mdgy70xvw2.html#blog337">MySql 字段类型说明和推荐</a>
</ul>
</li>
<li>
<h2>性能</h2>
<ul>
<li id="blog82"><a href="4x3vo76ym1.html#blog82">MySQL 回表查询</a>
<li id="blog336"><a href="x569xxr9ep.html#blog336">高并发系统数据库架构设计</a>
<li id="blog351"><a href="k3dyk7zvl0.html#blog351">MySql 定位和分析执行效率的方法</a>
<li id="blog488"><a href="od6vrqr93g.html#blog488">MySql 单表分页 Limit 性能优化</a>
<li id="blog492"><a href="4wevwlzyl2.html#blog492">MySql 索引介绍</a>
<li id="blog675"><a href="3dykq84yl0.html#blog675">Mysql 性能优化方法汇总</a>
</ul>
</li>
<li>
<h2>MySQL</h2>
<ul>
<li id="blog86"><a href="lgwyldne3q.html#blog86">MySQL concat、concat_ws、group_concat 函数用法</a>
<li id="blog107"><a href="m0wek4wyp9.html#blog107">SQL 中 WHERE 和 HAVING 子句有什么区别？</a>
<li id="blog134"><a href="54lvo36v6z.html#blog134">MySql 5.7 报错 sql_mode=only_full_group_by 问题解决方法</a>
<li id="blog148"><a href="8loyn5oyz3.html#blog148">mysql 控制 sql 长度的相关参数</a>
<li id="blog172"><a href="de296j6vq7.html#blog172">MySql 各日志配置方法：错误日志、慢查询日志、执行日志</a>
<li id="blog177"><a href="n2oegm5e73.html#blog177">MySQL 查询中 where in 如何保持顺序</a>
<li id="blog270"><a href="71xyjw0ed9.html#blog270">理解 MySQL 字符集</a>
<li id="blog300"><a href="8loyn11vz3.html#blog300">MySQL order by limit 分页数据重复或丢失问题说明</a>
<li id="blog301"><a href="nxq9zd5ydo.html#blog301">mysql 事务特性以及隔离级别说明</a>
<li id="blog302"><a href="z64y912e5l.html#blog302">MySQL 共享锁&amp;排他锁</a>
<li id="blog352"><a href="rpnv37wywm.html#blog352">MySQL 创建索引报错 &quot;Specified key was too long; max key length is 767 bytes&quot; 原因</a>
<li id="blog473"><a href="nxq9zgjydo.html#blog473">MySQL中当字段值为 <code>NULL</code> 时的注意事项</a>
<li id="blog489"><a href="02ky0klvz8.html#blog489">SQL 的执行顺序</a>
<li id="blog490"><a href="n2qvpnzy3m.html#blog490">MySQL 基础架构</a>
<li id="blog491"><a href="5m892e6901.html#blog491">MySQL不能远程连接解决方法</a>
</ul>
</li>
<li>
<h2>安全</h2>
<ul>
<li id="blog709"><a href="3xyq4qjvmq.html#blog709">SQL 注入漏洞</a>
</ul>
</li>
</ul>
</div>

<style>
    #cnzz_stat_icon_1280630928
    {
        display: none;
    }
</style>

<script src="../../vendor/binarytorch/larecipe/assets/js/jquery.min.js"></script>
<script src="../../modules/blog/js/detail.js"></script>

<script type="text/javascript">
    $(function () {
        var cid = '71xyjw0ed9.html';
        if (!checkView(cid)) {
            $.get('https://wangmaolin.net/api/blog/addView/article/71xyjw0ed9.html', function (data, status) {
                addView('71xyjw0ed9.html')
            });
        }
    });
</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7c12b9716af39eb368cff4a19aa89393";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7125202304422722"
     crossorigin="anonymous"></script>
	
	<div class="documentation is-dark" :class="{'expanded': ! sidebar}">
		<h1>理解 MySQL 字符集</h1><ul>
<li><a href="71xyjw0ed9.html#02263c65750baf6dc509449905e3d5e3">字符集设置</a></li>
<li><a href="71xyjw0ed9.html#4b64cd2bb071d29fad33805ac9abfcc8">字符集转换过程</a></li>
<li><a href="71xyjw0ed9.html#974e00e786eaf1ee2dbcc2364a4cac33">配置字符集</a></li>
<li><a href="71xyjw0ed9.html#11296a5653cdd8f61d7aa95510d231b1">References：</a></li>
</ul><p>转自：<a href="https://mingshan.fun/2020/01/07/mysql-charset/">明月逐人归</a></p>
<p>平时我们用MySQL，字符编码方式一般是 <code>utf8</code> 或者 <code>utf8mb4</code>，至于MySQL内部是如何处理编码问题的在日常开发中并没有十分关注，遇到最多的问题也无非是表中中文乱码和表情无法存储。对于编码不一致的问题，出问题是在所难免的，我们需要系统地了解下在MySQL内部字符集是如何配置和转化的。</p>
<h2 id="02263c65750baf6dc509449905e3d5e3"><a href="71xyjw0ed9.html#字符集设置" title="字符集设置"></a>字符集设置</h2>
<p>对于正常运行的InnoDB存储引擎，在MySQL客户端输入<code>show variables like 'character%';</code>：</p>
<table>
<thead>
<tr>
<th>Variable_name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>character_set_client</td>
<td>utf8mb4</td>
</tr>
<tr>
<td>character_set_connection</td>
<td>utf8mb4</td>
</tr>
<tr>
<td>character_set_database</td>
<td>utf8mb4</td>
</tr>
<tr>
<td>character_set_filesystem</td>
<td>binary</td>
</tr>
<tr>
<td>character_set_results</td>
<td>utf8mb4</td>
</tr>
<tr>
<td>character_set_server</td>
<td>utf8mb4</td>
</tr>
<tr>
<td>character_set_system</td>
<td>utf8</td>
</tr>
<tr>
<td>character_sets_dir</td>
<td>/usr/share/mysql/charsets/</td>
</tr>
</tbody>
</table>
<p>可以看到在MySQL内部还有一堆配置，那么这些配置都代表什么呢？我们来一个个看下。</p>
<p><strong>character_set_client</strong></p>
<p><code>character_set_client</code>为客户端使用的字符集，默认字符集是<code>utf8</code>。</p>
<p><strong>character_set_connection</strong></p>
<p><code>character_set_connection</code>为连接层字符集，如果连接数据库时没有指定字符集，就会用这个，默认为<code>utf8</code>。</p>
<p><strong>character_set_database</strong></p>
<p><code>character_set_database</code>为当前数据库的默认字符集，如果在创建数据库时没有选中这个，就会用这个，默认为<code>utf8</code>。</p>
<p><strong>character_set_filesystem</strong></p>
<p><code>character_set_filesystem</code>为文件系统字符集。默认值是binary，这意味着不会发生转换。</p>
<p><strong>character_set_results</strong></p>
<p><code>character_set_results</code>为数据库给客户端返回查询结果的编码格式。包括结果数据(如列值)、结果元数据(如列名)和错误消息。默认<code>utf8</code>。</p>
<p><strong>character_set_server</strong></p>
<p><code>character_set_server</code>为服务器默认的编码格式，默认为<code>latin1</code>。</p>
<p><strong>character_set_system</strong></p>
<p><code>character_set_system</code>为系统存储标识符（identifiers）的字符集，默认为<code>utf8</code>。不能进行更改。</p>
<p><strong>character_sets_dir</strong></p>
<p><code>character_sets_dir</code>为字符集安装的目录。</p>
<h2 id="4b64cd2bb071d29fad33805ac9abfcc8"><a href="71xyjw0ed9.html#字符集转换过程" title="字符集转换过程"></a>字符集转换过程</h2>
<p>我们发现MySQL有这么多字符集配置，试想一下，从一个客户端连接到MySQL服务器，到MySQL返回数据给客户端，中间的字符集是如何转化的？在《High Performance MySQL》一书中，有一节讲到了客户端与服务端通信时字符集的转换过程，如下图所示：</p>
<p><img src="../../storage/images/2022/05/04/mBci0433SaJMIELtwdPQlW94nzZa7tMq6qHHxru6.png" alt="" /></p>
<p>从上图的文字描述及图示我们可以得知，一个Statement 到 Result 是要经过一系列的字符转换过程。主要有以下过程：</p>
<ol>
<li>MySQL服务器收到客户端的请求后，将编码由<code>character_set_client</code>转至<code>character_set_connection</code>；</li>
<li>进行内部操作前将请求数据从<code>character_set_connection</code>转换为内部操作字符集，其确定方法如下：
<ol>
<li>使用每个数据字段的<code>CHARACTER SET</code>设定值；</li>
<li>若上述值不存在，则使用对应数据表的<code>DEFAULT CHARACTER SET</code>设定值(MySQL扩展，非SQL标准)；</li>
<li>若上述值不存在，则使用对应数据库的<code>DEFAULT CHARACTER SET</code>设定值；</li>
<li>若上述值不存在，则使用<code>character_set_server</code>设定值。</li>
</ol></li>
<li>将操作结果从内部操作字符集转换为<code>character_set_results</code>。</li>
</ol>
<h2 id="974e00e786eaf1ee2dbcc2364a4cac33"><a href="71xyjw0ed9.html#配置字符集" title="配置字符集"></a>配置字符集</h2>
<p>上面了解了MYSQL编码的基本概念，那么我们该怎么样设置呢？</p>
<p><strong>更改MySQL的配置文件</strong></p>
<p>在<code>Windows</code>平台上，配置文件名称为：<code>my.ini</code>，下面是在Windows平台MySQL相关的文件路径：</p>
<table>
<thead>
<tr>
<th>File Name</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>%WINDIR%\my.ini, %WINDIR%\my.cnf</td>
<td>Global options</td>
</tr>
<tr>
<td>C:\my.ini, C:\my.cnf</td>
<td>Global options</td>
</tr>
<tr>
<td>BASEDIR\my.ini, BASEDIR\my.cnf</td>
<td>Global options</td>
</tr>
<tr>
<td>defaults-extra-file</td>
<td>The file specified with –defaults-extra-file, if any</td>
</tr>
<tr>
<td>%APPDATA%\MySQL.mylogin.cnf</td>
<td>Login path options (clients only)</td>
</tr>
</tbody>
</table>
<p>通过找<strong>服务 -&gt; MySQLX -&gt; 属性 -&gt; 可执行文件的路径</strong>来找到MySQL配置文件的路径，下面是我的路径：</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\ProgramData\MySQL\MySQL Server 8.0\my.ini</span><br></pre></td></tr></tbody></table>
<p>在<code>Linux</code>平台，配置文件名称为：<code>my.cnf</code>，路径一般为<code>/etc/mysql/my.cnf</code>，下面是在Unix和类Unix平台MySQL相关的文件路径：</p>
<table>
<thead>
<tr>
<th>File Name</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>/etc/my.cnf</td>
<td>Global options</td>
</tr>
<tr>
<td>/etc/mysql/my.cnf</td>
<td>Global options</td>
</tr>
<tr>
<td>SYSCONFDIR/my.cnf</td>
<td>Global options</td>
</tr>
<tr>
<td>$MYSQL_HOME/my.cnf</td>
<td>Server-specific options (server only)</td>
</tr>
<tr>
<td>defaults-extra-file</td>
<td>The file specified with –defaults-extra-file, if any</td>
</tr>
<tr>
<td>~/.my.cnf</td>
<td>User-specific options</td>
</tr>
<tr>
<td>~/.mylogin.cnf</td>
<td>User-specific login path options (clients only)</td>
</tr>
</tbody>
</table>
<p>如下所示：</p>
<pre><code class="   language-php">root@f07cbb42905f:/etc/mysql# ls
conf.d  my.cnf  my.cnf.fallback  mysql.cnf  mysql.conf.d</code></pre>
<p>下面以<code>my.cnf</code>配置为例，配置字符集为<code>utf8mb4</code>，也是我们最常用的。在<code>my.cnf</code>添加如下内容：</p>
<pre><code class="   language-php">[client] 
default-character-set = utf8mb4 

[mysql] 
default-character-set = utf8mb4 

[mysqld] 
character-set-client-handshake = FALSE 
character-set-server = utf8mb4 
collation-server = utf8mb4_unicode_ci 
init_connect = 'SET NAMES utf8mb4'</code></pre>
<p><strong>更新数据库或表字符集</strong></p>
<p>更新指定数据库的字符集：</p>
<pre><code class="   language-php">ALTER DATABASE test CHARACTER SET `utf8mb4` COLLATE `utf8mb4_general_ci`;</code></pre>
<p>更新指定表的字符集：</p>
<pre><code class="   language-php">ALTER TABLE `TABLE_NAME` CONVERT TO CHARACTER SET `utf8mb4` COLLATE `utf8mb4_general_ci`; </code></pre>
<p>最后附上MySQL支持的字符集：</p>
<p><code>mysql&gt; SHOW CHARACTER SET;</code></p>
<table>
<thead>
<tr>
<th>Charset</th>
<th>Description</th>
<th>Default collation</th>
<th>Maxlen</th>
</tr>
</thead>
<tbody>
<tr>
<td>big5</td>
<td>Big5 Traditional Chinese</td>
<td>big5_chinese_ci</td>
<td>2</td>
</tr>
<tr>
<td>dec8</td>
<td>DEC West European</td>
<td>dec8_swedish_ci</td>
<td>1</td>
</tr>
<tr>
<td>cp850</td>
<td>DOS West European</td>
<td>cp850_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>hp8</td>
<td>HP West European</td>
<td>hp8_english_ci</td>
<td>1</td>
</tr>
<tr>
<td>koi8r</td>
<td>KOI8-R Relcom Russian</td>
<td>koi8r_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>latin1</td>
<td>cp1252 West European</td>
<td>latin1_swedish_ci</td>
<td>1</td>
</tr>
<tr>
<td>latin2</td>
<td>ISO 8859-2 Central European</td>
<td>latin2_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>swe7</td>
<td>7bit Swedish</td>
<td>swe7_swedish_ci</td>
<td>1</td>
</tr>
<tr>
<td>ascii</td>
<td>US ASCII</td>
<td>ascii_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>ujis</td>
<td>EUC-JP Japanese</td>
<td>ujis_japanese_ci</td>
<td>3</td>
</tr>
<tr>
<td>sjis</td>
<td>Shift-JIS Japanese</td>
<td>sjis_japanese_ci</td>
<td>2</td>
</tr>
<tr>
<td>hebrew</td>
<td>ISO 8859-8 Hebrew</td>
<td>hebrew_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>tis620</td>
<td>TIS620 Thai</td>
<td>tis620_thai_ci</td>
<td>1</td>
</tr>
<tr>
<td>euckr</td>
<td>EUC-KR Korean</td>
<td>euckr_korean_ci</td>
<td>2</td>
</tr>
<tr>
<td>koi8u</td>
<td>KOI8-U Ukrainian</td>
<td>koi8u_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>gb2312</td>
<td>GB2312 Simplified Chinese</td>
<td>gb2312_chinese_ci</td>
<td>2</td>
</tr>
<tr>
<td>greek</td>
<td>ISO 8859-7 Greek</td>
<td>greek_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>cp1250</td>
<td>Windows Central European</td>
<td>cp1250_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>gbk</td>
<td>GBK Simplified Chinese</td>
<td>gbk_chinese_ci</td>
<td>2</td>
</tr>
<tr>
<td>latin5</td>
<td>ISO 8859-9 Turkish</td>
<td>latin5_turkish_ci</td>
<td>1</td>
</tr>
<tr>
<td>armscii8</td>
<td>ARMSCII-8 Armenian</td>
<td>armscii8_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>utf8</td>
<td>UTF-8 Unicode</td>
<td>utf8_general_ci</td>
<td>3</td>
</tr>
<tr>
<td>ucs2</td>
<td>UCS-2 Unicode</td>
<td>ucs2_general_ci</td>
<td>2</td>
</tr>
<tr>
<td>cp866</td>
<td>DOS Russian</td>
<td>cp866_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>keybcs2</td>
<td>DOS Kamenicky Czech-Slovak</td>
<td>keybcs2_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>macce</td>
<td>Mac Central European</td>
<td>macce_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>macroman</td>
<td>Mac West European</td>
<td>macroman_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>cp852</td>
<td>DOS Central European</td>
<td>cp852_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>latin7</td>
<td>ISO 8859-13 Baltic</td>
<td>latin7_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>utf8mb4</td>
<td>UTF-8 Unicode</td>
<td>utf8mb4_general_ci</td>
<td>4</td>
</tr>
<tr>
<td>cp1251</td>
<td>Windows Cyrillic</td>
<td>cp1251_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>utf16</td>
<td>UTF-16 Unicode</td>
<td>utf16_general_ci</td>
<td>4</td>
</tr>
<tr>
<td>utf16le</td>
<td>UTF-16LE Unicode</td>
<td>utf16le_general_ci</td>
<td>4</td>
</tr>
<tr>
<td>cp1256</td>
<td>Windows Arabic</td>
<td>cp1256_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>cp1257</td>
<td>Windows Baltic</td>
<td>cp1257_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>utf32</td>
<td>UTF-32 Unicode</td>
<td>utf32_general_ci</td>
<td>4</td>
</tr>
<tr>
<td>binary</td>
<td>Binary pseudo charset</td>
<td>binary</td>
<td>1</td>
</tr>
<tr>
<td>geostd8</td>
<td>GEOSTD8 Georgian</td>
<td>geostd8_general_ci</td>
<td>1</td>
</tr>
<tr>
<td>cp932</td>
<td>SJIS for Windows Japanese</td>
<td>cp932_japanese_ci</td>
<td>2</td>
</tr>
<tr>
<td>eucjpms</td>
<td>UJIS for Windows Japanese</td>
<td>eucjpms_japanese_ci</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="11296a5653cdd8f61d7aa95510d231b1"><a href="71xyjw0ed9.html#References：" title="References："></a>References：</h2>
<ul>
<li>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html">Server System Variables</a></p>
</li>
<li>
<p><a href="https://www.jianshu.com/p/f7d7609de6b0">更改MySQL数据库的编码为utf8mb4</a></p>
</li>
<li>
<p><a href="http://www.laruence.com/2008/01/05/12.html">深入Mysql字符集设置</a></p>
</li>
<li>
<p>《High Performance MySQL》</p>
</li>
<li>
<p><strong>Post author:</strong> Mingshan</p>
</li>
<li>
<p><strong>Post link:</strong> <a href="https://mingshan.fun/2020/01/07/mysql-charset/" title="理解MySQL字符集">https://mingshan.fun/2020/01/07/mysql-charset/</a></p>
</li>
<li>
<p><strong>Copyright Notice:</strong> All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null">BY-NC-SA</a> unless stating additionally.</p>
</li>
</ul><h4 style="text-align:left;line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont, Helvetica Neue, PingFang SC, Hiragino Sans GB , Microsoft YaHei UI , Microsoft YaHei ,Arial,sans-serif;font-size:14px;font-weight:bold;margin:2em 8px 0.5em;color:rgba(250, 81, 81, 1)">引用链接</h4><p style="text-align:left;line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont, Helvetica Neue, PingFang SC, Hiragino Sans GB , Microsoft YaHei UI , Microsoft YaHei ,Arial,sans-serif;font-size:80%;margin:0.5em 8px;color:#3f3f3f"><code style="font-size: 90%; opacity: 0.6;">[1]</code> 明月逐人归: <i><a href="https://mingshan.fun/2020/01/07/mysql-charset/" target="_blank">https://mingshan.fun/2020/01/07/mysql-charset/</a></i><br><code style="font-size: 90%; opacity: 0.6;">[2]</code> Server System Variables: <i><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html" target="_blank">https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html</a></i><br><code style="font-size: 90%; opacity: 0.6;">[3]</code> 更改MySQL数据库的编码为utf8mb4: <i><a href="https://www.jianshu.com/p/f7d7609de6b0" target="_blank">https://www.jianshu.com/p/f7d7609de6b0</a></i><br><code style="font-size: 90%; opacity: 0.6;">[4]</code> 深入Mysql字符集设置: <i><a href="http://www.laruence.com/2008/01/05/12.html" target="_blank">http://www.laruence.com/2008/01/05/12.html</a></i><br><code style="font-size: 90%; opacity: 0.6;">[5]</code> https://mingshan.fun/2020/01/07/mysql-charset/: <i><a href="https://mingshan.fun/2020/01/07/mysql-charset/ "理解MySQL字符集"" target="_blank">https://mingshan.fun/2020/01/07/mysql-charset/ "理解MySQL字符集"</a></i><br><code style="font-size: 90%; opacity: 0.6;">[6]</code> BY-NC-SA: <i><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" target="_blank">https://creativecommons.org/licenses/by-nc-sa/4.0/null</a></i><br></p>
			</div>
</div>

            <larecipe-back-to-top></larecipe-back-to-top>
        </div>


        <script>
            window.config = [];
        </script>

        <script type="text/javascript">
            if(localStorage.getItem('larecipeSidebar') == null) {
                localStorage.setItem('larecipeSidebar', !! 1);
            }
        </script>

        <script src="../../vendor/binarytorch/larecipe/assets/js/app.js"></script>

        <script>
            window.LaRecipe = new CreateLarecipe(config)
        </script>

        <!-- Google Analytics -->
                <!-- /Google Analytics -->

        
        <script>
            LaRecipe.run()
        </script>
    </body>
</html>
